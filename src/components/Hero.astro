---
//import videoSrc from "../assets/video_bg.mp4";
import qlogo from "../assets/q_logo.png";
import buttonimg from "../assets/button_neu.png";

---

<section>
    <!-- Preloader -->
    <div
        id="preloader"
        class="fixed top-0 left-0 w-full h-screen bg-black flex justify-center items-center z-50 transition-opacity duration-500">
        <div
            class="w-12 h-12 border-4 border-gray-700 border-t-white rounded-full animate-spin">
        </div>
    </div>

    <div class="m-0 p-0 box-border w-full min-h-screen relative">
        <!-- Video Container -->
        <div class="fixed top-0 left-0 w-full h-screen -z-10 overflow-hidden">
            <video
                id="backgroundVideo"
                class="absolute min-w-full min-h-full w-auto h-auto top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 object-cover opacity-0 transition-opacity duration-500"
                autoplay
                muted
                loop
                playsinline>
                <source
                    src="https://covercard.quality-magazine.ch/output_smaller.mp4"
                    type="video/mp4"
                />
                Ihr Browser unterst√ºtzt keine HTML5 Videos.
            </video>
        </div>

        <!-- Overlay -->
        <div class="fixed top-0 left-0 w-full h-screen -z-10 bg-black/20"></div>

        <!-- Content -->
        <div
            class="relative h-screen flex flex-col items-center justify-center px-4">
            <!-- Logo in top right corner -->
            <img
                src={buttonimg.src}
                alt="Quality Logo"
                class="absolute top-4 right-4 w-36 h-auto"
            />

            <!-- Centered Q Logo -->
            <div class="mb-12">
                <img src={qlogo.src} alt="Q Logo" class="w-16 h-auto" />
            </div>

            <!-- Buttons -->
            <div class="flex flex-col gap-4 w-full max-w-xl mx-auto">
                <a
                    href="#"
                    class="w-full bg-white py-4 text-black text-center font-medium hover:bg-gray-100 transition-colors">
                    Kaufe Deine Quality Print<br />
                    inkl. Digital Vollversion
                </a>

                <a
                    href="#"
                    class="w-full bg-white py-4 text-black text-center font-medium hover:bg-gray-100 transition-colors">
                    Digital-Vollversion lesen!
                </a>
            </div>
        </div>
    </div>
</section>

<script>

    document.addEventListener("DOMContentLoaded", function () {
        const video = document.getElementById("backgroundVideo");
        const preloader = document.getElementById("preloader");
        let isVideoLoaded = false;
        let isDomLoaded = true;

        function hidePreloader() {
            if (isVideoLoaded && isDomLoaded) {
                preloader.classList.add("opacity-0", "pointer-events-none");
                video.classList.add("opacity-100");
            }
        }

        video.addEventListener("loadeddata", function () {
            isVideoLoaded = true;
            hidePreloader();
        });

        setTimeout(function () {
            if (!isVideoLoaded) {
                isVideoLoaded = true;
                hidePreloader();
            }
        }, 2000);
    });
</script>
